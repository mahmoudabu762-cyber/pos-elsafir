<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ููุทุฉ ุงูุจูุน - ุงูุฏูุชูุฑ</title>
  <link rel="stylesheet" href="pos.css" />
  <script>
  try {
    const theme = localStorage.getItem("theme");
    if (theme === "dark") {
      document.documentElement.classList.add("dark-theme");
    }
  } catch (e) {}
</script>
</head>
<body>
  <div id="topToast" class="toast">๐ข ุชู ุชุญููู ุงูุตูุญุฉ ุจูุฌุงุญ</div>
  <div class="topbar">
    <div class="user-info">
      <span id="userInfo">๐ค ุงููุณุชุฎุฏู: ...</span>
      <span id="clock">๐ ุฌุงุฑู ุชุญููู ุงูููุช...</span>
      <button id="themeToggle" class="theme-toggle" title="ุชุจุฏูู ุงููุธูุฑ">๐</button> 
    </div>
    

    <div class="topbar-buttons">
      <div class="icon-button" onclick="showScreen('msgScreen')">
  <span class="badge" id="msgCount">2</span>
  ๐ฉ
  <span>ุงูุฑุณุงุฆู</span>
</div>

      <div class="icon-button" onclick="openCalendar()">๐<span>ุงูุชูููู</span></div>

      <div class="icon-button" onclick="showScreen('lowStockScreen')">โ๏ธ<span>ุงูููุชููุฉ</span><span id="stockCount" class="badge">5</span></div>
      <div class="icon-button" onclick="showScreen('dailyScreen')">๐<span>ุงูุญุฑูุฉ</span></div>
      <div class="icon-button" onclick="showScreen('wasteScreen')">๐๏ธ<span>ุชุงูู</span></div>
      <div class="icon-button" onclick="showScreen('incomeScreen')">๐ต<span>ููุจูุถ</span></div>
      <div class="icon-button" onclick="showScreen('expenseScreen')">๐ณ<span>ูุฏููุน</span></div>
      <div class="icon-button" onclick="openPasswordModal()">โ๏ธ<span>ุงูุฅุนุฏุงุฏุงุช</span></div>
      <div class="icon-button" onclick="logout()">๐<span>ุฎุฑูุฌ</span></div>
    </div>
  </div>

  <div id="settingsDropdown" class="dropdown-menu">
 <button onclick="
  document.getElementById('settingsDropdown').style.display='none';
  openItemModal();
">๐ฆ ุฅุถุงูุฉ ุตูู</button>


  <button onclick="document.getElementById('settingsDropdown').style.display='none'; openModal('categoryModal'); loadCategoriesList()">๐๏ธ ุฅุถุงูุฉ ุชุตููู</button>
  <button onclick="document.getElementById('settingsDropdown').style.display='none'; openModal('branchModal'); loadBranchesList()">๐ข ุฅุถุงูุฉ ูุฑุน</button>
  <button onclick="document.getElementById('settingsDropdown').style.display='none'; showSettingsForm('clientForm')">๐ค ุฅุถุงูุฉ ุนููู</button>
  <button onclick="document.getElementById('settingsDropdown').style.display='none'; showSettingsForm('supplierForm')">๐ ุฅุถุงูุฉ ููุฑุฏ</button>
  <button onclick="document.getElementById('settingsDropdown').style.display='none'; showSettingsForm('expenseForm')">๐ณ ุฅุถุงูุฉ ูุตุฑูู</button>
  <button onclick="document.getElementById('settingsDropdown').style.display='none'; showSettingsForm('incomeForm')">๐ต ุฅุถุงูุฉ ุฅูุฑุงุฏ</button>
  <button onclick="document.getElementById('settingsDropdown').style.display='none'; showSettingsForm('paymentForm')">๐ฐ ุทุฑู ุงูุฏูุน</button>
<button onclick="document.getElementById('settingsDropdown').style.display='none'; openModal('investorModal'); loadInvestors()">๐งโ๐ผ ุฅุถุงูุฉ ูุณุชุซูุฑ</button>
<button onclick="document.getElementById('settingsDropdown').style.display='none'; openModal('companyModal'); loadCompanies()">๐ข ุฅุถุงูุฉ ุดุฑูุฉ ุงุณุชุซูุงุฑูุฉ</button>
<button onclick="document.getElementById('settingsDropdown').style.display='none'; openModal('fundModal'); loadFunds()">๐ฐ ุฅุถุงูุฉ ุตูุฏูู ุงุณุชุซูุงุฑู</button>
<button onclick="document.getElementById('settingsDropdown').style.display='none'; openModal('generalModal'); loadGeneralSettings()">โ๏ธ ุฅุนุฏุงุฏุงุช ุนุงูุฉ</button>
<button onclick="document.getElementById('settingsDropdown').style.display='none'; openModal('statusModal'); loadGeneralSettings()">๐ ุญุงูุฉ ุงููุธุงู</button>
</div>


 <div id="msgScreen" class="screen">
  <h2>๐ฉ ุดุงุดุฉ ุงูุฑุณุงุฆู</h2>

  <!-- โ ุงุฎุชูุงุฑ ุงููุณุชูู ูุจู ุงูุฅุฑุณุงู -->
  <div class="recipient-row" style="margin-bottom: 10px;">
    <label for="recipientSelect">๐ค ุฅุฑุณุงู ุฅูู:</label>
    <select id="recipientSelect" style="padding: 5px;">
      <option value="">ุงุฎุชุฑ ุงููุณุชูู</option>
    </select>
  </div>

  <!-- โ ุฅุฏุฎุงู ุงูุฑุณุงูุฉ ูุฒุฑ ุงูุฅุฑุณุงู -->
  <div class="message-input-row" style="margin-top: 10px;">
    <input type="text" id="chatInput" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..." style="width: 70%;" />
    <button onclick="sendMessage()" style="width: 25%;">๐จ ุฅุฑุณุงู</button>
  </div>
  <!-- โ ุญุงูุฉ ุงูุฅุฑุณุงู -->
  <div id="sendStatus" class="send-status" style="margin-top: 10px;"></div>
<h3 style="margin-bottom: 10px;">๐จ ูุต ุงูุฑุณุงูุฉ</h3>
<div id="messageList"></div>
<div id="noMessagesNotice" style="text-align:center; color:#666; font-size:16px; margin-top:10px; display:none;">
  ๐ญ ูุง ุชูุฌุฏ ุฑุณุงุฆู ุญุงููุงู.
</div>
   <!--<div id="messageList" class="message-list">ูุง ุชูุฌุฏ ุฑุณุงุฆู ุญุงููุงู.</div>-->
</div>



  <div id="calendarScreen" class="screen">
  <h2>๐ ุดุงุดุฉ ุงูุชูููู</h2>
  <input type="date" id="calendarDate" title="ุงุฎุชุฑ ุงูุชุงุฑูุฎ" />
  <textarea id="calendarNote" placeholder="ุงูุชุจ ููุงุญุธุชู ููุง..." title="ูุฑุจุน ูุชุงุจุฉ ุงูููุงุญุธุงุช" rows="4"></textarea>
  <button onclick="saveNote()">๐พ ุญูุธ ุงูููุงุญุธุฉ</button>
  <div id="noteStatus"></div>
  <div id="calendarStatus" style="margin-top: 10px; font-size: 16px; color: #555;"></div>

  <hr>
  <h3>๐ ุงูููุงุญุธุงุช ุงูุณุงุจูุฉ:</h3>
  <div id="noteList"></div>
</div>


  <div id="lowStockScreen" class="screen"><h2>โ๏ธ ุดุงุดุฉ ุงูุฃุตูุงู ุงูููุชููุฉ</h2></div>
  <div id="dailyScreen" class="screen"><h2>๐ ุดุงุดุฉ ุงูุญุฑูุฉ ุงูููููุฉ</h2></div>
  <div id="wasteScreen" class="screen"><h2>๐๏ธ ุดุงุดุฉ ุฅุถุงูุฉ ุชุงูู</h2></div>
  <div id="incomeScreen" class="screen"><h2>๐ต ุดุงุดุฉ ุฅุถุงูุฉ ููุจูุถ</h2></div>
  <div id="expenseScreen" class="screen"><h2>๐ณ ุดุงุดุฉ ุฅุถุงูุฉ ูุฏููุน</h2></div>

  <div id="settingsScreen" class="screen">
  <!-- ุงูููุงุฐุฌ ุฏุงุฎู ุงูุดุงุดุฉ -->
  <div id="itemForm" class="settings-form"><h3>๐ฆ ูููุฐุฌ ุฅุถุงูุฉ ุตูู</h3></div>
  <div id="clientForm" class="settings-form"><h3>๐ค ูููุฐุฌ ุฅุถุงูุฉ ุนููู</h3></div>
  <div id="supplierForm" class="settings-form"><h3>๐ ูููุฐุฌ ุฅุถุงูุฉ ููุฑุฏ</h3></div>
  <div id="expenseForm" class="settings-form"><h3>๐ณ ูููุฐุฌ ุฅุถุงูุฉ ูุตุฑูู</h3></div>
  <div id="incomeForm" class="settings-form"><h3>๐ต ูููุฐุฌ ุฅุถุงูุฉ ุฅูุฑุงุฏ</h3></div>
  <div id="paymentForm" class="settings-form"><h3>๐ฐ ูููุฐุฌ ุทุฑู ุงูุฏูุน</h3></div>

  <!-- ุงูููุงุฐุฌ ุงูุชู ุชู ุชุญููููุง ุฅูู ููุงูุฐ ููุจุซูุฉ -->
  <!-- ูุฐู ูุฌุฑุฏ ุฅุดุงุฑุงุช ุฏุงุฎู ุงูุดุงุดุฉุ ุงูููุงูุฐ ููุณูุง ุฎุงุฑุฌ ูุฐุง ุงููุณู -->
  <div id="categoryForm" class="settings-form"><h3>๐๏ธ ูุงูุฐุฉ ุงูุชุตููู (ููุจุซูุฉ)</h3></div>
  <div id="branchForm" class="settings-form"><h3>๐ข ูุงูุฐุฉ ุงููุฑุน (ููุจุซูุฉ)</h3></div>
  <div id="investorForm" class="settings-form"><h3>๐งโ๐ผ ูุงูุฐุฉ ุงููุณุชุซูุฑ (ููุจุซูุฉ)</h3></div>
  <div id="companyForm" class="settings-form"><h3>๐ข ูุงูุฐุฉ ุงูุดุฑูุฉ ุงูุงุณุชุซูุงุฑูุฉ (ููุจุซูุฉ)</h3></div>
  <div id="fundForm" class="settings-form"><h3>๐ฐ ูุงูุฐุฉ ุงูุตูุฏูู ุงูุงุณุชุซูุงุฑู (ููุจุซูุฉ)</h3></div>
  <div id="generalForm" class="settings-form"><h3>โ๏ธ ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ (ููุจุซูุฉ)</h3></div>
 <div id="systemStatusForm" class="settings-form"><h3>โ๏ธ ูุงูุฐุฉ ุญุงูุฉ ุงููุธุงู  (ููุจุซูุฉ)</h3></div>
</div>

<div id="categoryModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" onclick="closeModal('categoryModal')">โ</button>
    <h3>๐๏ธ ุฅุถุงูุฉ ุชุตููู ุฌุฏูุฏ</h3>
    <input type="text" id="categoryName" placeholder="ุงุณู ุงูุชุตููู" />
    <label for="categoryImage">๐ท ุตูุฑุฉ ุงูุชุตููู:</label>
    <input type="file" id="categoryImage" accept=".jpg,.jpeg,.png,.webp" />
    <div id="imagePreview" style="margin: 5px 0; font-size: 14px; color: #555;"></div>
    <div style="display: flex; gap: 10px; align-items: center;">
      <button id="categorySaveBtn" onclick="saveCategory()">๐พ ุญูุธ ุงูุชุตููู</button>
    </div>
    <div id="categoryStatus" class="status-text"></div>
    <div id="categoryList" class="record-table"></div>
  </div>
</div>



<!-- ุดุงุดุฉ ููุจุซูุฉ ูุญุงูุฉ ุงููุธุงู -->
<div id="generalModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" onclick="closeModal('generalModal')">โ</button>
    <h3>๐ ุญุงูุฉ ุงุณุชุฎุฏุงู ุงููุธุงู</h3>
    <!-- ุฒุฑ ูุชุญ Firebase Console -->
    <div style="margin-bottom: 15px;">
      <a href="https://console.firebase.google.com/" target="_blank" style="text-decoration: none;">
        <button style="background-color: #007bff; color: white; padding: 8px 12px; border: none; border-radius: 6px; cursor: pointer;">
          ๐ ูุชุญ Firebase Console
        </button>
      </a>
    </div>
    <!-- ููุงู ุนุฑุถ ุงูุญุงูุฉ -->
    <div id="generalStatus" class="status-text">โณ ุฌุงุฑู ุชุญููู ุญุงูุฉ ุงููุธุงู...</div>
  </div>
</div>


<div id="itemModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" onclick="closeModal('itemModal')">โ</button>
    <h3>๐ฆ ุฅุถุงูุฉ ุตูู ุฌุฏูุฏ</h3>

    <label for="itemName">๐ท๏ธ ุงุณู ุงูุตูู:</label>
    <input type="text" id="itemName" placeholder="ุงุณู ุงูุตูู" />

    <label for="categorySelect">๐๏ธ ุงุณู ุงูุชุตููู:</label>
    <select id="categorySelect"><option value="">โ ุงุฎุชุฑ ุงูุชุตููู โ</option></select>

    <label for="branchSelect">๐ข ุงุณู ุงููุฑุน:</label>
    <select id="branchSelect"><option value="">โ ุงุฎุชุฑ ุงููุฑุน โ</option></select>

    <label for="quantity">๐ฆ ุงููููุฉ:</label>
    <input type="number" id="quantity" value="0" />

    <label for="baseCost">๐ฐ ุณุนุฑ ุงูุชูููุฉ ุงูุฃุณุงุณู:</label>
    <input type="number" id="baseCost" value="0" />

    <label for="branchCost">๐ฐ ุณุนุฑ ุชูููุฉ ุงููุฑุน:</label>
    <input type="number" id="branchCost" value="0" />

    <label for="reorderLimit">โ๏ธ ุญุฏ ุงูุทูุจ:</label>
    <input type="number" id="reorderLimit" value="0" />

    <label for="itemImage">๐ท ุชุญููู ุตูุฑุฉ ุงูุตูู:</label>
    <input type="file" id="itemImage" accept=".jpg,.jpeg,.png,.webp" onchange="previewItemImage()" />
    <div id="itemImagePreview" style="margin: 5px 0; font-size: 14px; color: #555;"></div>

    <div style="margin: 10px 0;">
      <button id="itemSaveBtn" onclick="saveItem()">๐พ ุญูุธ ุงูุตูู</button>
    </div>

    <div id="itemStatus" class="status-text"></div>

    <div id="itemTableWrapper" class="record-table" style="margin-top: 20px;">
      <table>
        <thead>
          <tr>
            <th>ุงูููุฏ</th>
            <th>ุงูุงุณู</th>
            <th>ุงูุชุตููู</th>
            <th>ุงููุฑุน</th>
            <th>ุงููููุฉ</th>
            <th>ุชูููุฉ ุฃุณุงุณูุฉ</th>
            <th>ุชูููุฉ ูุฑุน</th>
            <th>ุฅุฌูุงูู ุฃุณุงุณู</th>
            <th>ุฅุฌูุงูู ูุฑุน</th>
            <th>ุญุฏ ุงูุทูุจ</th>
            <th>๐ท ุงูุตูุฑุฉ</th>
            <th>๐ ุงูุฑุงุจุท</th>
            <th>๐</th>
          </tr>
        </thead>
        <tbody id="itemTableBody"></tbody>
      </table>
    </div>
  </div>
</div>










<!-- ุดุงุดุฉ ููุจุซูุฉ ูุฅุถุงูุฉ ูุฑุน -->
<div id="branchModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" onclick="closeModal('branchModal')">X</button>
    <h3>๐ข ุฅุถุงูุฉ ูุฑุน ุฌุฏูุฏ</h3>
    <input type="text" id="branchName" placeholder="๐ท๏ธ ุงุณู ุงููุฑุน" />
    <button onclick="saveBranch()">๐พ ุญูุธ ุงููุฑุน</button>
    <div id="branchStatus" class="status-text"></div>
    <div id="branchList" class="record-table"></div>
  </div>
</div>





  <div id="logoutScreen" class="screen">
    <h2>๐ ุชู ุชุณุฌูู ุงูุฎุฑูุฌ</h2>
    <p>ุชู ูุณุญ ุงูุจูุงูุงุช ุงููุญููุฉ ุจูุฌุงุญ.</p>
  </div>
  <!-- ูุงูุฐุฉ ููุจุซูุฉ ููุชุญูู ุจูููุฉ ุงูุณุฑ -->
  <div id="passwordModal" class="modal">
  <div class="modal-content">
    <button class="modal-close" onclick="closePasswordModal()">โ</button>
    <h3>๐ ุงูุฏุฎูู ุฅูู ุงูุฅุนุฏุงุฏุงุช</h3>
    <input type="password" id="settingsPassword" placeholder="ุฃุฏุฎู ูููุฉ ุงูุณุฑ..." />
    <button onclick="verifySettingsPassword()">ุฏุฎูู</button>
    <div id="authStatus"></div>
  </div>
</div>
















  <script type="module" src="script-pos.js?v=1.0.3"></script>


</body>
</html>
